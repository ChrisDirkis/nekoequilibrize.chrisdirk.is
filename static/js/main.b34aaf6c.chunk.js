(this.webpackJsonpld49=this.webpackJsonpld49||[]).push([[0],{24:function(e,s,a){e.exports={creature:"Creature_creature__2kXdQ",creatureImage:"Creature_creatureImage__2CZ8Z",creatureName:"Creature_creatureName__sMxkh",creatureNumerics:"Creature_creatureNumerics__38Wd1",creatureBooleans:"Creature_creatureBooleans__s3q7Z"}},308:function(e,s,a){},309:function(e,s,a){"use strict";a.r(s);var t=a(0),r=a.n(t),n=a(61),i=a.n(n),c=a(57),o=a(17),l=a(33),u=a.n(l),d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURXRWm5b7x9i/2P+zywAAAHbq7AwAAAAFdFJOU/////8A+7YOUwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAgZJREFUWEftluturDAMhFN23/+Zz3h8iZM4bFClnv7oSAu5zHwxAUrb+5v6A/xCwHPemNjn224qj7f2tbE1yJqz0jjyV23DzA6dAJKvAYhvZqAEgKu0ceIcIJfbJePtul4dYKOh6MAmAJRLsYcuhHwA0MV2ZMIEuCzZBcArABJHLxO8KQuVYgEvL0DiQmCPCoD5KwWgNc0/BcgeKMAKuAVgFWt1BWDNVwBvDqgEgIMR1S0gBjNgfAwCUGxCBjAl+Sl+C0jSGAE0J9WA+alQFwBLAY8BbGR1gGfkPOdPAMN9UFofMYc/0VkJkJcNiMgv/ANg+z4BZYaoJWkYKRGRJ2AhjAOpbpeMmEnmPgCIGBjs+l2QPltJywAkEKU4SwnsLSvaOUsXZdJFwjFAnaOCMG/jDiAvrkZNDphL2AFIGBBw8rqmEjYA/vnUYCgI5lJtANh/5FlySJZeS3gAqEt4CNAS1KV6BID5CMAHKQCJAsIZQEwMxAFZYvVoPmoL6Afm7YNvGDOKdoC+On/jV/8EYFfrv58FSEI8OGeISUbNSG0A3Ce8EpoYABhVn2oH0FYBGO9BBaD5BjAWUAH8/5EEGEvQSVMJ8E+gZklJhA8AyRvAUnx+E+EBIALCELF7AFBP8vfl5wKqPfAlCDCWZqFp/QqQJFV7Q9NL/h6QJNk1DZ0CtvrfgPf7H03TMLjaORDeAAAAAElFTkSuQmCC",p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAPUExURXRWm9i/2P+zy/f/rgAAAIUtdIgAAAAFdFJOU/////8A+7YOUwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAANVJREFUWEftkVkOwyAMBdnuf+Z6AwN2UJV+IFUeqQ2lfmNDUvuREIQACcFrgcZC8FqguRBcFIxgCG4KevKvBUmRnZWjAFM55yK4joOA0xU+jK+wgkrfnIa8CniU3WAFrdYRnwcgrMERwC8p3wZA8BhSxVgB9Jdi0x/ZDVagedOe2AxWQPlU5vwiWq+hL3WL++MlcqwCtBicBXp+inqnmEcYpxlPKSL8O1hG2Bf6/gmeAZENRgV6nbxIqSwCAJQu2AsfnS4w0L7F/PNU+DUhCAESgvuC1j5UsznrheNOwQAAAABJRU5ErkJggg==",m=a(2),h=[{description:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"Me, a cadet, in charge of equilibrizing these worlds? I don't... I don't know, it seems like such a big responsibility."}),Object(m.jsx)("p",{children:"But I have to succeed. I must!"}),Object(m.jsx)("br",{}),Object(m.jsxs)("p",{children:["This world has nothing but plants, all around. There should be enough resources to support ",Object(m.jsx)("em",{children:"an animal that only eats plants,"})," I reckon. Easy peasy!"]})]}),organismTemplates:[],steps:200,initialEnergyPerSpecies:200,seedsPerRound:200,leavesPerRound:200,grassPerRound:200,playerOrganismCount:1,playerOrganismsPassConstraints:function(e){return!0},defaultPlayerOrganisms:[{name:"grazing cat",image:d,weapons:0,armour:0,speed:0,noWeaponsInput:!0,noArmourInput:!0,noSpeedInput:!0,eatsSeeds:!1,eatsLeaves:!1,eatsGrass:!1}]},{description:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"Yes! I've equilibrized my first world, I'm on fire! Well, figuratively, not literally, except for in the way that everything's oxidising slowly all the time anyway. Ooh, Command's giving me a new operation."}),Object(m.jsx)("p",{children:"Hang on... this world is already populated?"}),Object(m.jsx)("br",{}),Object(m.jsxs)("p",{children:["This world has a large population of mice, and I've been instructed to introduce predator cats. What did they say in academy... that's right! ",Object(m.jsx)("em",{children:"For an animal to eat another, its weapons must be stronger than the other animal's weapons and armour, and it must be faster."})," Luckily for me, these mice have no weapons or armour to speak of at all."]}),Object(m.jsxs)("p",{children:["One more thing: The higher the energy requirement, the harder it is for an animal to breed. ",Object(m.jsx)("em",{children:"If one species is outcompeting another, try make it more expenisve without making it better (hunting is pass/fail)."})]})]}),organismTemplates:[{name:"mouse",image:p,weapons:0,armour:0,speed:1,eatsSeeds:!0,eatsLeaves:!1,eatsGrass:!1}],steps:200,initialEnergyPerSpecies:200,seedsPerRound:200,leavesPerRound:200,grassPerRound:200,playerOrganismCount:1,playerOrganismsPassConstraints:function(e){return e[0].weapons>0},defaultPlayerOrganisms:[{name:"predator cat",image:d,weapons:0,armour:0,speed:0,eatsSeeds:!1,eatsLeaves:!1,eatsGrass:!1}]},{description:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"Two species? You've got to be kidding me. Command must have it out for me. I can do it, though!"}),Object(m.jsx)("br",{}),Object(m.jsx)("p",{children:"This world has both mice and songbirds, but the songbirds aren't going to last long. They're so fast, but being fast doesn't give them any advantages when there's no predators."})]}),organismTemplates:[{name:"mouse",image:p,weapons:0,armour:0,speed:1,eatsSeeds:!0,eatsLeaves:!1,eatsGrass:!1},{name:"songbird",image:p,weapons:0,armour:0,speed:3,eatsSeeds:!0,eatsLeaves:!1,eatsGrass:!1}],steps:400,initialEnergyPerSpecies:200,seedsPerRound:200,leavesPerRound:200,grassPerRound:200,playerOrganismCount:1,playerOrganismsPassConstraints:function(e){return e[0].weapons>0},defaultPlayerOrganisms:[{name:"predator cat",image:d,weapons:0,armour:0,speed:0,eatsSeeds:!1,eatsLeaves:!1,eatsGrass:!1}]},{description:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"Damn, I'm getting good at this! I'm proud of me right now, gotta say. What have we got in store this time?"}),Object(m.jsx)("p",{children:"Aww, prey cats? I hate to see the poor things eaten, but it's for the good of the world, I guess."}),Object(m.jsx)("br",{}),Object(m.jsx)("p",{children:"In this world, we have mice, songbirds, and falcons. We're going to have to figure out a way to balance out this mess."})]}),organismTemplates:[{name:"mouse",image:p,weapons:0,armour:0,speed:1,eatsSeeds:!0,eatsLeaves:!1,eatsGrass:!1},{name:"songbird",image:p,weapons:0,armour:0,speed:3,eatsSeeds:!0,eatsLeaves:!1,eatsGrass:!1},{name:"falcon",image:p,weapons:1,armour:0,speed:10,eatsSeeds:!1,eatsLeaves:!1,eatsGrass:!1}],steps:400,initialEnergyPerSpecies:200,seedsPerRound:200,leavesPerRound:200,grassPerRound:200,playerOrganismCount:2,playerOrganismsPassConstraints:function(e){return e[0].weapons>0&&0===e[1].weapons},defaultPlayerOrganisms:[{name:"predator cat",image:d,weapons:1,armour:0,speed:0,eatsSeeds:!1,eatsLeaves:!1,eatsGrass:!1},{name:"prey cat",image:d,weapons:0,armour:0,speed:0,eatsSeeds:!1,eatsLeaves:!1,eatsGrass:!1}]}],g=a(24),j=a.n(g),A=function(e){var s=e.template;return Object(m.jsxs)("div",{className:j.a.creature,children:[Object(m.jsx)("h2",{className:j.a.creatureName,children:s.name}),Object(m.jsx)("img",{src:s.image,alt:"stylized ".concat(s.name),className:j.a.creatureImage}),Object(m.jsxs)("div",{className:j.a.creatureNumerics,children:[Object(m.jsxs)("span",{children:[s.weapons," weapons"]}),Object(m.jsxs)("span",{children:[s.armour," armour"]}),Object(m.jsxs)("span",{children:[s.speed," speed"]})]}),Object(m.jsxs)("div",{className:j.a.creatureBooleans,children:[s.eatsSeeds&&Object(m.jsx)("span",{children:"eats seeds"}),s.eatsGrass&&Object(m.jsx)("span",{children:"eats grass"}),s.eatsLeaves&&Object(m.jsx)("span",{children:"eats leaves"})]})]})},b=a(81),O=a(105),f=a(18);function v(e,s,a){var t,r,n=(t=a,function(){var e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}),i=[],c=new Array(e.organismTemplates.length+s.length).fill(0),l=0,u=Object(f.a)(e.organismTemplates);try{for(u.s();!(r=u.n()).done;){var d=r.value,p=i.length,m=S(d),h=Math.floor(e.initialEnergyPerSpecies/m);c[p]=h,l+=h,i.push(d)}}catch(T){u.e(T)}finally{u.f()}var g,j=Object(f.a)(s);try{for(j.s();!(g=j.n()).done;){var A=g.value,b=i.length,O=S(A),v=Math.floor(e.initialEnergyPerSpecies/O);c[b]=v,l+=v,i.push(A)}}catch(T){j.e(T)}finally{j.f()}for(var y={seeds:0,leaves:0,grass:0},C=[],z=0;z<e.steps;z++){y.seeds=+e.seedsPerRound,y.leaves=+e.leavesPerRound,y.grass=+e.grassPerRound;for(var N=new Array(i.length).fill(0),P=0,I=Math.floor(l/2),_=0;_<I;_++){var R=x(c,l,i.length,n),B=x(c,--l,i.length,n);l--;var F,E=w(R,i[R],B,i[B],y,n),k=Object(f.a)(E);try{for(k.s();!(F=k.n()).done;){var L=Object(o.a)(F.value,2),U=L[0],M=L[1];N[U]+=M,P+=M}}catch(T){k.e(T)}finally{k.f()}}for(var J=i.map((function(e){return 0})),G=0;G<i.length;G++)J[G]+=N[G];if(C.push(J),J.some((function(e){return 0===e})))break;c=N,l=P}return{roundResults:C,resultSummary:C[C.length-1].some((function(e){return 0===e}))?"fail":"success"}}function x(e,s,a,t){for(var r=Math.floor(t()*s),n=0,i=0;i<a;){if((n+=e[i])>r)return e[i]--,i;i++}return console.error("Sample failure"),0}function w(e,s,a,t,r,n){var i=function(e,s,a,t){return e===a?null:s.weapons>t.weapons+t.armour&&s.speed>t.speed?s:t.weapons>s.weapons+s.armour&&t.speed>s.speed?t:null}(e,s,a,t);return i?[[i===s?e:a,y(i,.95*S(i===s?t:s),n)]]:[[e,y(s,C(s,r),n)],[a,y(t,C(t,r),n)]]}function y(e,s,a){for(var t=0,r=S(e),n=.8*r+s,i=Math.floor(5*n),c=0;c<i;c++)a()<1/r/5&&t++;return t}function C(e,s){return e.eatsLeaves&&s.leaves>0?(s.leaves--,7):e.eatsGrass&&s.grass>0?(s.grass--,6):e.eatsSeeds&&s.seeds>0?(s.seeds--,5):0}function S(e){var s=.1;return e.eatsGrass&&(s+=5),e.eatsLeaves&&(s+=3),e.eatsSeeds&&(s+=1),s+=e.weapons,s+=.75*e.armour,s+=e.speed}var z=function(e){var s,a=e.template,t=e.onTemplateChanged;function r(e,s){"number"===typeof s&&(s=Math.max(Math.round(s),0));var r=Object(O.a)(Object(O.a)({},a),{},Object(b.a)({},e,s));t(r)}return Object(m.jsxs)("div",{className:j.a.creature,children:[Object(m.jsxs)("h2",{className:j.a.creatureName,children:[null!==(s=a.name)&&void 0!==s?s:"cool cat"," (energy requirement: ",S(a),")"]}),a.name&&Object(m.jsx)("img",{src:a.image,alt:"stylized ".concat(a.name),className:j.a.creatureImage}),Object(m.jsxs)("div",{className:j.a.creatureNumerics,children:[a.noWeaponsInput?Object(m.jsxs)("span",{children:[a.weapons," weapons"]}):Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"number",value:a.weapons,onChange:function(e){return r("weapons",e.target.valueAsNumber)}})," weapons"]}),a.noArmourInput?Object(m.jsxs)("span",{children:[a.armour," armour"]}):Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"number",value:a.armour,onChange:function(e){return r("armour",e.target.valueAsNumber)}})," armour"]}),a.noSpeedInput?Object(m.jsxs)("span",{children:[a.speed," speed"]}):Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"number",value:a.speed,onChange:function(e){return r("speed",e.target.valueAsNumber)}})," speed"]})]}),Object(m.jsxs)("div",{className:j.a.creatureBooleans,children:[Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"checkbox",checked:a.eatsSeeds,onChange:function(e){return r("eatsSeeds",e.target.checked)}}),"eats seeds"]}),Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"checkbox",checked:a.eatsGrass,onChange:function(e){return r("eatsGrass",e.target.checked)}}),"eats grass"]}),Object(m.jsxs)("label",{children:[Object(m.jsx)("input",{type:"checkbox",checked:a.eatsLeaves,onChange:function(e){return r("eatsLeaves",e.target.checked)}}),"eats leaves"]})]})]})},N=a(311),P=a(316),I=a(69),_=a(161),R=a(46),B=a.n(R),F=["#74569B","#96FBC7","#F7FFAE","#FFB3CB","#fffef7"],E=function(e){var s=e.puzzle,a=e.playerOrganisms,r=e.seed,n=e.reseed,i=e.onLevelPassed,o=Object(t.useMemo)((function(){return v(s,a,r)}),[s,a,r]);"success"===o.resultSummary&&i();var l=s.playerOrganismsPassConstraints(a),u="success"===o.resultSummary&&l?B.a.success:B.a.fail;return Object(m.jsxs)("div",{className:B.a.results+" "+u,children:[!l&&Object(m.jsx)("h2",{className:B.a.title,children:"invalid ecosystem"}),l&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{className:B.a.title,children:o.resultSummary}),Object(m.jsx)("div",{className:B.a.graph,children:Object(m.jsx)(N.a,{children:Object(m.jsxs)(P.a,{data:o.roundResults,children:[Object(m.jsx)(I.a,{verticalAlign:"bottom",height:36,formatter:function(e,t,r){var n=r<s.organismTemplates.length?s.organismTemplates[r]:a[r-s.organismTemplates.length];return Object(m.jsx)("span",{style:{color:t},children:n.name})},margin:{top:36}}),Object(c.a)(o.roundResults[0].keys()).map((function(e){return Object(m.jsx)(_.a,{type:"monotone",stroke:F[e%F.length],dataKey:e,dot:!1,strokeWidth:5},e)}))]})})}),"fail"===o.resultSummary&&Object(m.jsx)("button",{onClick:n,children:"try another reality"})]})]})},k=function(e){var s=Object(t.useState)([]),a=Object(o.a)(s,2),r=a[0],n=a[1];Object(t.useEffect)((function(){var e;n(JSON.parse(null!==(e=localStorage.getItem("passed"))&&void 0!==e?e:"[]"))}),[n]);var i=Object(t.useState)(null),l=Object(o.a)(i,2),d=l[0],p=l[1],g=Object(t.useState)([]),j=Object(o.a)(g,2),b=j[0],O=j[1],f=Object(t.useState)(1),v=Object(o.a)(f,2),x=v[0],w=v[1],y=Object(t.useCallback)((function(e){var s,a,t=JSON.parse(null!==(s=localStorage.getItem("puzzle"+e.toString()))&&void 0!==s?s:"[]");t.length>0?O(t):O(Object(c.a)(h[e].defaultPlayerOrganisms)),w(Number.parseInt(null!==(a=localStorage.getItem("seed"+e.toString()))&&void 0!==a?a:"1")),p(e)}),[p,O,w]),C=Object(t.useCallback)((function(e,s){O((function(a){var t=Object(c.a)(a);return t.splice(s,1,e),h[d].playerOrganismsPassConstraints(t)?(localStorage.setItem("puzzle"+d.toString(),JSON.stringify(t)),t):a}))}),[O,d]),S=Object(t.useCallback)((function(){w((function(e){return localStorage.setItem("seed"+d.toString(),(e+1).toString()),e+1}))}),[w,d]),N=null===d?null:h[d];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:u.a.app,children:[Object(m.jsxs)("div",{className:u.a.header,children:[Object(m.jsxs)("h1",{children:["Nekolibrium",Object(m.jsx)("span",{style:{fontSize:"0.375em",paddingLeft:"1em"},children:"\u732b\u30ea\u30d6\u30ea\u30a6\u30e0"})]}),Object(m.jsx)("h3",{children:"bring the worlds to equilibrium"})]}),Object(m.jsx)("div",{className:u.a.puzzleListContainer,children:Object(m.jsx)("div",{className:u.a.puzzleList,children:h.map((function(e,s){return Object(m.jsxs)("button",{onClick:function(){return y(s)},className:(d===s?"selected":void 0)+" "+(r.includes(s)?"passed":""),children:["world ",s+1]},s)}))})})]}),N&&Object(m.jsxs)("div",{className:u.a.puzzle,children:[Object(m.jsxs)("h1",{children:["World ",d+1]}),Object(m.jsxs)("div",{className:u.a.puzzleContainer,children:[Object(m.jsxs)("div",{className:u.a.puzzleText,children:[N.description,N.organismTemplates.map((function(e,s){return Object(m.jsx)(A,{template:e},s)}))]}),Object(m.jsxs)("div",{className:u.a.puzzleContent,children:[Object(m.jsx)(E,{puzzle:N,playerOrganisms:b,seed:Math.PI/10*x,reseed:S,onLevelPassed:function(){return function(e){if(!r.includes(e)){var s=[].concat(Object(c.a)(r),[e]);localStorage.setItem("passed",JSON.stringify(s)),n(s)}}(d)}}),b.map((function(e,s){return Object(m.jsx)(z,{template:e,onTemplateChanged:function(e){return C(e,s)}},s)}))]})]})]})]})},L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,317)).then((function(s){var a=s.getCLS,t=s.getFID,r=s.getFCP,n=s.getLCP,i=s.getTTFB;a(e),t(e),r(e),n(e),i(e)}))};a(308);i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root")),L()},33:function(e,s,a){e.exports={app:"App_app___B2LQ",header:"App_header__1Xt5M",puzzleListContainer:"App_puzzleListContainer__hAfRp",puzzleList:"App_puzzleList__2xRXO",puzzle:"App_puzzle__wGCc9",puzzleContainer:"App_puzzleContainer__1dvT8",puzzleText:"App_puzzleText__3Pqva",puzzleContent:"App_puzzleContent__22sUj"}},46:function(e,s,a){e.exports={results:"PuzzleResults_results__3u1Vz",success:"PuzzleResults_success__31SYi",fail:"PuzzleResults_fail__2C6sJ",title:"PuzzleResults_title__11qt5",graph:"PuzzleResults_graph__nbIaT"}}},[[309,1,2]]]);
//# sourceMappingURL=main.b34aaf6c.chunk.js.map